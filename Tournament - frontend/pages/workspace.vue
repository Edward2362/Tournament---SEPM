<template>
  <div class="container">
    <div class="workspace">
      <div class="body">
        <div class="section">
          <h1>Recent</h1>
          <div class="projects">
            <ProjectCard
              v-for="project in getRecentProject"
              :key="project._id"
              :project="project"
            />
          </div>
        </div>
        <div class="head">
          <p>
            Projects<span> {{ filter === "" ? "" : "as " + filter }}</span>
          </p>
          <div class="categories">
            <div
              class="all"
              :class="{ active: filter == '' }"
              @click="filter = ''"
            >
              <svg
                width="19"
                height="19"
                viewBox="0 0 19 19"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6.04545 0H2.59091C1.90365 0 1.24477 0.272968 0.758766 0.758766C0.272968 1.24476 0 1.90365 0 2.59091V6.04545C0 6.73271 0.272968 7.39159 0.758766 7.87759C1.24476 8.36339 1.90365 8.63636 2.59091 8.63636H6.04545C6.73271 8.63636 7.39159 8.36339 7.87759 7.87759C8.36339 7.3916 8.63636 6.73271 8.63636 6.04545V2.59091C8.63636 1.90365 8.36339 1.24477 7.87759 0.758766C7.3916 0.272968 6.73271 0 6.04545 0ZM6.90909 6.04545C6.90909 6.27447 6.8181 6.49424 6.65617 6.65617C6.49424 6.8181 6.27447 6.90909 6.04545 6.90909H2.59091C2.36189 6.90909 2.14212 6.8181 1.98019 6.65617C1.81826 6.49424 1.72727 6.27447 1.72727 6.04545V2.59091C1.72727 2.36189 1.81826 2.14212 1.98019 1.98019C2.14212 1.81826 2.36189 1.72727 2.59091 1.72727H6.04545C6.27447 1.72727 6.49424 1.81826 6.65617 1.98019C6.8181 2.14212 6.90909 2.36189 6.90909 2.59091V6.04545Z"
                  fill="#FF5C72"
                />
                <path
                  d="M6.04545 10.3636H2.59091C1.90365 10.3636 1.24477 10.6366 0.758766 11.1224C0.272968 11.6084 0 12.2673 0 12.9546V16.4091C0 17.0964 0.272968 17.7552 0.758766 18.2412C1.24476 18.727 1.90365 19 2.59091 19H6.04545C6.73271 19 7.39159 18.727 7.87759 18.2412C8.36339 17.7553 8.63636 17.0964 8.63636 16.4091V12.9546C8.63636 12.2673 8.36339 11.6084 7.87759 11.1224C7.3916 10.6366 6.73271 10.3636 6.04545 10.3636ZM6.90909 16.4091C6.90909 16.6381 6.8181 16.8579 6.65617 17.0198C6.49424 17.1817 6.27447 17.2727 6.04545 17.2727H2.59091C2.36189 17.2727 2.14212 17.1817 1.98019 17.0198C1.81826 16.8579 1.72727 16.6381 1.72727 16.4091V12.9546C1.72727 12.7255 1.81826 12.5058 1.98019 12.3438C2.14212 12.1819 2.36189 12.0909 2.59091 12.0909H6.04545C6.27447 12.0909 6.49424 12.1819 6.65617 12.3438C6.8181 12.5058 6.90909 12.7255 6.90909 12.9546V16.4091Z"
                  fill="#FF5C72"
                />
                <path
                  d="M16.4087 10.3636H12.9542C12.2669 10.3636 11.6081 10.6366 11.122 11.1224C10.6362 11.6084 10.3633 12.2673 10.3633 12.9546V16.4091C10.3633 17.0964 10.6362 17.7552 11.122 18.2412C11.608 18.727 12.2669 19 12.9542 19H16.4087C17.096 19 17.7549 18.727 18.2409 18.2412C18.7267 17.7553 18.9996 17.0964 18.9996 16.4091V12.9546C18.9996 12.2673 18.7267 11.6084 18.2409 11.1224C17.7549 10.6366 17.096 10.3636 16.4087 10.3636ZM17.2724 16.4091C17.2724 16.6381 17.1814 16.8579 17.0194 17.0198C16.8575 17.1817 16.6378 17.2727 16.4087 17.2727H12.9542C12.7252 17.2727 12.5054 17.1817 12.3435 17.0198C12.1815 16.8579 12.0906 16.6381 12.0906 16.4091V12.9546C12.0906 12.7255 12.1815 12.5058 12.3435 12.3438C12.5054 12.1819 12.7252 12.0909 12.9542 12.0909H16.4087C16.6378 12.0909 16.8575 12.1819 17.0194 12.3438C17.1814 12.5058 17.2724 12.7255 17.2724 12.9546V16.4091Z"
                  fill="#FF5C72"
                />
                <path
                  d="M16.4087 0H12.9542C12.2669 0 11.6081 0.272968 11.122 0.758766C10.6362 1.24476 10.3633 1.90365 10.3633 2.59091V6.04545C10.3633 6.73271 10.6362 7.39159 11.122 7.87759C11.608 8.36339 12.2669 8.63636 12.9542 8.63636H16.4087C17.096 8.63636 17.7549 8.36339 18.2409 7.87759C18.7267 7.3916 18.9996 6.73271 18.9996 6.04545V2.59091C18.9996 1.90365 18.7267 1.24477 18.2409 0.758766C17.7549 0.272968 17.096 0 16.4087 0ZM17.2724 6.04545C17.2724 6.27447 17.1814 6.49424 17.0194 6.65617C16.8575 6.8181 16.6378 6.90909 16.4087 6.90909H12.9542C12.7252 6.90909 12.5054 6.8181 12.3435 6.65617C12.1815 6.49424 12.0906 6.27447 12.0906 6.04545V2.59091C12.0906 2.36189 12.1815 2.14212 12.3435 1.98019C12.5054 1.81826 12.7252 1.72727 12.9542 1.72727H16.4087C16.6378 1.72727 16.8575 1.81826 17.0194 1.98019C17.1814 2.14212 17.2724 2.36189 17.2724 2.59091V6.04545Z"
                  fill="#FF5C72"
                />
              </svg>
            </div>
            <div
              class="as-manager"
              :class="{ active: filter == 'manager' }"
              @click="filter = 'manager'"
            >
              <svg
                width="15"
                height="23"
                viewBox="0 0 15 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.688348 22.0282C0.870891 22.0282 1.04606 21.9557 1.17513 21.8266C1.3042 21.6975 1.37673 21.5224 1.37673 21.3398V16.1974C1.37765 15.7359 1.56142 15.2935 1.88778 14.967C2.2143 14.6406 2.65668 14.4568 3.11825 14.4559H4.56385C4.80924 15.4052 5.54064 16.1524 6.48454 16.4178L4.57431 19.5361C4.48304 19.6856 4.45231 19.8641 4.48811 20.0354C4.52391 20.2069 4.62363 20.3581 4.76699 20.4586L6.83213 21.9042C6.94799 21.9857 7.08628 22.0293 7.22793 22.0293C7.36958 22.0293 7.50789 21.9857 7.62373 21.9042L9.68887 20.4586C9.83223 20.3581 9.93195 20.2069 9.96775 20.0354C10.0036 19.8641 9.97282 19.6856 9.88155 19.5361L7.97132 16.4178C8.91522 16.1524 9.64664 15.4052 9.89201 14.4559H11.3376C11.7992 14.4568 12.2416 14.6406 12.5681 14.967C12.8944 15.2935 13.0782 15.7359 13.0791 16.1974V21.3398C13.0791 21.5858 13.2104 21.8131 13.4233 21.936C13.6363 22.0589 13.8987 22.0589 14.1117 21.936C14.3247 21.8131 14.4559 21.5858 14.4559 21.3398V16.1974C14.454 15.3711 14.1249 14.579 13.5405 13.9945C12.9561 13.4101 12.1639 13.081 11.3376 13.0791H3.11832C2.29195 13.081 1.49984 13.4101 0.915348 13.9945C0.331012 14.579 0.00184879 15.3711 0 16.1974V21.3398C0 21.5224 0.0725277 21.6975 0.201597 21.8266C0.330666 21.9557 0.505806 22.0282 0.688348 22.0282ZM7.22795 20.4999L6.08874 19.7014L7.22795 17.8394L8.36716 19.7014L7.22795 20.4999ZM7.22795 15.1443C6.73901 15.1414 6.28834 14.8794 6.04386 14.456H8.41201C8.16754 14.8794 7.7169 15.1414 7.22795 15.1443ZM1.72092 8.26054H2.12364C2.12364 8.28804 2.14776 8.31555 2.15806 8.34659L1.87241 8.62885C1.74303 8.75792 1.67051 8.93309 1.67051 9.11579C1.67051 9.29849 1.74304 9.47381 1.87241 9.60289L3.82045 11.5509C3.94952 11.6803 4.12484 11.7528 4.30754 11.7528C4.49024 11.7528 4.66541 11.6803 4.79448 11.5509L5.07675 11.2653L5.1628 11.2997V11.7024C5.1628 11.885 5.23533 12.0601 5.3644 12.1892C5.49347 12.3183 5.66864 12.3908 5.85118 12.3908H8.6047C8.78724 12.3908 8.96241 12.3183 9.09148 12.1892C9.22055 12.0601 9.29308 11.885 9.29308 11.7024V11.2997L9.37912 11.2653L9.66139 11.5509C9.79046 11.6803 9.96563 11.7528 10.1483 11.7528C10.331 11.7528 10.5064 11.6803 10.6354 11.5509L12.5835 9.60289C12.7128 9.47382 12.7854 9.2985 12.7854 9.11579C12.7854 8.9331 12.7128 8.75793 12.5835 8.62885L12.2978 8.34659C12.2978 8.31555 12.3219 8.28804 12.3322 8.26054H12.735C12.9175 8.26054 13.0927 8.18801 13.2217 8.05894C13.3508 7.92987 13.4233 7.7547 13.4233 7.57216V4.81864C13.4233 4.6361 13.3508 4.46093 13.2217 4.33186C13.0927 4.20279 12.9175 4.13026 12.735 4.13026H12.3322C12.3322 4.10276 12.3081 4.07525 12.2978 4.04421L12.5835 3.76195C12.7128 3.63288 12.7854 3.45771 12.7854 3.27501C12.7854 3.09231 12.7128 2.91699 12.5835 2.78791L10.6354 0.839874C10.5064 0.710494 10.331 0.637971 10.1483 0.637971C9.96564 0.637971 9.79047 0.710498 9.66139 0.839874L9.37912 1.12552L9.29308 1.0911V0.68838C9.29308 0.505837 9.22055 0.330666 9.09148 0.201597C8.96241 0.0725277 8.78724 0 8.6047 0H5.85118C5.66864 0 5.49347 0.0725277 5.3644 0.201597C5.23533 0.330666 5.1628 0.505837 5.1628 0.68838V1.0911L5.07675 1.12552L4.79448 0.839874C4.66542 0.710494 4.49024 0.637971 4.30754 0.637971C4.12485 0.637971 3.94952 0.710498 3.82045 0.839874L1.87241 2.78791C1.74303 2.91698 1.67051 3.0923 1.67051 3.27501C1.67051 3.4577 1.74304 3.63287 1.87241 3.76195L2.15806 4.04421C2.15806 4.07525 2.13393 4.10276 2.12364 4.13026H1.72092C1.53838 4.13026 1.3632 4.20279 1.23413 4.33186C1.10507 4.46093 1.03254 4.6361 1.03254 4.81864V7.57216C1.03254 7.7547 1.10507 7.92987 1.23413 8.05894C1.3632 8.18801 1.53838 8.26054 1.72092 8.26054ZM2.4093 5.50702H2.61243C2.76025 5.50656 2.90407 5.45831 3.02255 5.36965C3.14086 5.28099 3.22768 5.15668 3.26978 5.01486C3.35137 4.7432 3.4597 4.48028 3.59338 4.23015C3.66361 4.1 3.69019 3.95095 3.66914 3.80453C3.64809 3.65825 3.58048 3.52273 3.4763 3.41778L3.33525 3.27319L4.3059 2.30254L4.45049 2.44359C4.55544 2.54777 4.69081 2.61553 4.83709 2.63658C4.98353 2.65763 5.13257 2.63105 5.2627 2.56083C5.51286 2.42715 5.77576 2.31882 6.04742 2.23723C6.18924 2.19512 6.31355 2.10831 6.40221 1.98999C6.49087 1.87152 6.53912 1.7277 6.53958 1.57987V1.37674H7.91634V1.57987C7.9168 1.72769 7.96505 1.87152 8.05371 1.98999C8.14236 2.10831 8.26667 2.19512 8.4085 2.23723C8.68016 2.31882 8.94307 2.42714 9.19321 2.56083C9.32336 2.63105 9.47241 2.65763 9.61883 2.63658C9.76511 2.61553 9.90063 2.54792 10.0056 2.44374L10.1502 2.30269L11.1208 3.27334L10.9798 3.41793C10.8756 3.52288 10.8078 3.65825 10.7868 3.80453C10.7657 3.95097 10.7923 4.10001 10.8625 4.23015C10.9962 4.4803 11.1045 4.74321 11.1861 5.01486C11.2282 5.15669 11.315 5.28099 11.4334 5.36965C11.5518 5.45831 11.6957 5.50656 11.8435 5.50702H12.0466V6.88378H11.8435C11.6957 6.88424 11.5518 6.93249 11.4334 7.02115C11.3151 7.10981 11.2282 7.23412 11.1861 7.37594C11.1045 7.6476 10.9962 7.91052 10.8625 8.16065C10.7923 8.2908 10.7657 8.43985 10.7868 8.58627C10.8078 8.73255 10.8754 8.86808 10.9796 8.97302L11.1207 9.11761L10.15 10.0883L10.0054 9.94721C9.90048 9.84303 9.7651 9.77527 9.61883 9.75422C9.47239 9.73317 9.32334 9.75975 9.19321 9.82997C8.94306 9.96365 8.68015 10.072 8.4085 10.1536C8.26667 10.1957 8.14236 10.2825 8.05371 10.4008C7.96505 10.5193 7.9168 10.6631 7.91634 10.8109V11.0141H6.53958V10.8109C6.53912 10.6631 6.49087 10.5193 6.40221 10.4008C6.31355 10.2825 6.18924 10.1957 6.04742 10.1536C5.77576 10.072 5.51284 9.96366 5.2627 9.82997C5.13256 9.75975 4.98351 9.73317 4.83709 9.75422C4.69081 9.77527 4.55528 9.84288 4.45034 9.94706L4.30575 10.0881L3.33509 9.11746L3.47615 8.97287C3.58032 8.86792 3.64809 8.73255 3.66914 8.58627C3.69019 8.43983 3.66361 8.29079 3.59338 8.16065C3.45971 7.9105 3.35138 7.64759 3.26978 7.37594C3.22768 7.23411 3.14087 7.10981 3.02255 7.02115C2.90408 6.93249 2.76026 6.88424 2.61243 6.88378H2.4093V5.50702ZM7.22795 8.94892C7.95827 8.94892 8.65864 8.65882 9.17493 8.14237C9.69137 7.62609 9.98147 6.92571 9.98147 6.1954C9.98147 5.46509 9.69137 4.76471 9.17493 4.24843C8.65864 3.73198 7.95827 3.44188 7.22795 3.44188C6.49764 3.44188 5.79727 3.73198 5.28098 4.24843C4.76454 4.76471 4.47444 5.46509 4.47444 6.1954C4.47444 6.92571 4.76454 7.62609 5.28098 8.14237C5.79727 8.65882 6.49764 8.94892 7.22795 8.94892ZM7.22795 4.81864C7.59304 4.81864 7.94324 4.96369 8.20152 5.22183C8.45966 5.48013 8.60471 5.83032 8.60471 6.1954C8.60471 6.56048 8.45966 6.91069 8.20152 7.16897C7.94322 7.42711 7.59303 7.57216 7.22795 7.57216C6.86288 7.57216 6.51267 7.42711 6.25439 7.16897C5.99625 6.91067 5.85119 6.56048 5.85119 6.1954C5.85119 5.83032 5.99625 5.48011 6.25439 5.22183C6.51268 4.96369 6.86288 4.81864 7.22795 4.81864Z"
                  fill="#FF5C72"
                />
              </svg>
            </div>
            <div
              class="as-member"
              :class="{ active: filter == 'member' }"
              @click="filter = 'member'"
            >
              <svg
                width="15"
                height="25"
                viewBox="0 0 15 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.50215 0C4.95004 0 2.86524 2.13801 2.86524 4.75316C2.86524 7.36832 4.95017 9.50454 7.50215 9.50454C10.0541 9.50454 12.1408 7.36814 12.1408 4.75316C12.1408 2.13819 10.0543 0 7.50215 0ZM7.50215 1.56251C9.23022 1.56251 10.6144 2.98257 10.6144 4.75312C10.6144 6.52385 9.23009 7.94216 7.50215 7.94216C5.77408 7.94216 4.38994 6.52371 4.38994 4.75312C4.38994 2.98239 5.77421 1.56251 7.50215 1.56251ZM7.50215 10.48C7.45688 10.48 7.41314 10.4871 7.36805 10.4877C7.18459 10.491 7.003 10.4987 6.82293 10.515C6.72711 10.5239 6.63317 10.5377 6.53855 10.5501C6.41057 10.567 6.28327 10.5862 6.15733 10.6096C6.0513 10.6293 5.94613 10.6509 5.84163 10.6751C5.72812 10.7015 5.61648 10.732 5.505 10.7635C5.40085 10.793 5.29601 10.8197 5.19373 10.8535C5.00159 10.9174 4.81286 10.9883 4.62788 11.0672C4.5387 11.1052 4.4531 11.1495 4.36579 11.1908C4.25653 11.2424 4.14744 11.2942 4.04125 11.3511C3.94679 11.4015 3.85489 11.4553 3.76282 11.5097C3.66207 11.5692 3.56268 11.6304 3.465 11.6944C3.37803 11.7514 3.29192 11.8092 3.20733 11.8699C3.18453 11.8864 3.16002 11.9006 3.13739 11.9171C3.11237 11.936 3.08871 11.9565 3.06608 11.9783C1.21035 13.378 0 15.6258 0 18.1672V24.2217C0.000680746 24.4291 0.081859 24.6274 0.225327 24.7733C0.368966 24.9193 0.563147 25.0007 0.76535 25H14.2391C14.4406 24.9996 14.6336 24.9175 14.7762 24.7717C14.9188 24.6259 14.9993 24.4282 15 24.2217V18.1672C15 15.6299 13.7963 13.3846 11.9474 11.9841C11.9225 11.9601 11.8962 11.9376 11.8684 11.9172C11.8417 11.8976 11.8134 11.88 11.7866 11.8607C11.7071 11.8038 11.6254 11.7511 11.5439 11.6974C11.4433 11.6313 11.341 11.568 11.2372 11.5067C11.149 11.4545 11.0611 11.4025 10.9707 11.3541C10.859 11.2943 10.7445 11.2404 10.6296 11.1863C10.5456 11.1467 10.4637 11.1038 10.3779 11.0672C10.1911 10.9877 10.0003 10.9164 9.8061 10.852C9.71012 10.8203 9.61175 10.7945 9.51423 10.7666C9.39663 10.7329 9.27818 10.7012 9.15837 10.6734C9.05643 10.6499 8.95364 10.6286 8.85016 10.6094C8.72269 10.5855 8.59403 10.5671 8.46452 10.55C8.37075 10.5376 8.27782 10.5236 8.18303 10.5149C8.00247 10.498 7.819 10.4907 7.63504 10.4875C7.59045 10.4868 7.54691 10.48 7.50215 10.48ZM7.50215 12.0441C7.7365 12.0441 7.96793 12.0585 8.19466 12.0852C8.23534 12.0899 8.27499 12.098 8.31532 12.1035C8.50423 12.1299 8.68973 12.1633 8.87216 12.2073C8.9062 12.2153 8.93972 12.2247 8.97342 12.2333C9.17186 12.2849 9.3674 12.3435 9.55714 12.4148C9.56803 12.4186 9.5791 12.4228 9.58999 12.4268C9.79932 12.5071 10.003 12.5986 10.2005 12.7015L7.50214 15.4664L4.80538 12.7015C5.18915 12.5017 5.59709 12.3475 6.02358 12.2361C6.06153 12.2263 6.09863 12.2144 6.13675 12.2055C6.31885 12.1619 6.50537 12.1295 6.69377 12.1033C6.73274 12.0978 6.77069 12.0894 6.81 12.085C7.03703 12.0582 7.2671 12.0441 7.50215 12.0441ZM3.51875 13.5928L6.96317 17.1236C7.1063 17.2701 7.29997 17.3524 7.50216 17.3524C7.70434 17.3524 7.89818 17.2703 8.04113 17.1238L11.4869 13.593C12.7104 14.711 13.4793 16.3382 13.4793 18.1675V23.4381H1.52601V18.1675C1.52601 16.3381 2.29511 14.7108 3.51875 13.5928Z"
                  fill="#FF5C72"
                />
              </svg>
            </div>
          </div>
        </div>
        <div class="section">
          <h1>On going</h1>
          <div class="projects">
            <ProjectCard
              v-for="project in onGoingProjects"
              :key="project._id"
              :project="project"
            />
          </div>
        </div>
        <div class="section">
          <h1>Done</h1>
          <div class="projects">
            <ProjectCard
              v-for="project in doneProjects"
              :key="project._id"
              :project="project"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import ProjectCard from "../components/ProjectCard.vue";
import { mapGetters, mapActions, mapMutations } from "vuex";

export default {
  data() {
    return {
      filter: "",
    };
  },
  computed: {
    ...mapGetters({
      getRecentProject: "projects/getRecentProject",
      getOnGoingProject: "projects/getOnGoingProject",
      getDoneProject: "projects/getDoneProject",
      userId: "user/getUserId",
      getUser: "user/getUser",
    }),
    // userTest() {return this.$store.user.state},

    onGoingProjects() {
      if (this.filter === "manager") {
        return this.getOnGoingProject.filter(
          (project) => project.admin === this.userId
        );
      } else if (this.filter === "member") {
        return this.getOnGoingProject.filter(
          (project) => project.admin !== this.userId
        );
      }
      return this.getOnGoingProject;
    },
    doneProjects() {
      if (this.filter === "manager") {
        return this.getDoneProject.filter(
          (project) => project.admin === this.userId
        );
      } else if (this.filter === "member") {
        return this.getDoneProject.filter(
          (project) => project.admin !== this.userId
        );
      }
      return this.getDoneProject;
    },
  },
  components: { ProjectCard },
  methods: {
    ...mapActions({
      fetchProjectByUser: "projects/fetchProjectByUser",
      fetchUserByCookie: "user/fetchUserByCookie",
    }),
  },
  async created() {
    // if(Trello.token() != null){
    //   Trello.deauthorize();
    // }
    this.fetchUserByCookie();    this.fetchProjectByUser();

},
};
</script>

<style scoped>
@import "../assets/styles/workspace.css";
</style>
